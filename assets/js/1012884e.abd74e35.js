"use strict";(self.webpackChunk_mssfoobar_docs=self.webpackChunk_mssfoobar_docs||[]).push([[1892],{22254:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"modules/iams/development/multi-tenancy","title":"Overview","description":"With IAMS, multitenancy can be implemented using:","source":"@site/docs/modules/iams/development/multi-tenancy.mdx","sourceDirName":"modules/iams/development","slug":"/modules/iams/development/multi-tenancy","permalink":"/docs/docs/modules/iams/development/multi-tenancy","draft":false,"unlisted":false,"editUrl":"https://github.com/mssfoobar/docs/tree/main/docs/modules/iams/development/multi-tenancy.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Multi-tenancy"},"sidebar":"modulesSidebar","previous":{"title":"Setup System Administrator Account","permalink":"/docs/docs/modules/iams/quickstart/setup-system-admin-account"},"next":{"title":"Operating Concepts","permalink":"/docs/docs/modules/iams/development/operating-concept-and-administration/operating-concepts"}}');var s=t(74848),i=t(28453);const o={sidebar_position:4,sidebar_label:"Multi-tenancy"},r="Overview",l={},c=[{value:"Separate Realm for Each Tenant",id:"separate-realm-for-each-tenant",level:2},{value:"Single Realm for All Tenants",id:"single-realm-for-all-tenants",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"overview",children:"Overview"})}),"\n",(0,s.jsx)(n.p,{children:"With IAMS, multitenancy can be implemented using:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Separate realm for each tenant"}),"\n",(0,s.jsx)(n.li,{children:"Single realm for all tenants"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"separate-realm-for-each-tenant",children:"Separate Realm for Each Tenant"}),"\n",(0,s.jsx)(n.p,{children:"In this setup, a separate realm is created for each tenant. Each tenant will have its own realm configuration i.e., users, themes, clients, roles, etc."}),"\n",(0,s.jsx)(n.p,{children:"This setup is useful where each tenant is totally separated from other tenants and have no shared relationship among them."}),"\n",(0,s.jsx)(n.p,{children:"User account in one tenant cannot be assigned to access another tenant."}),"\n",(0,s.jsx)(n.p,{children:"Same username can appear in 2 tenants but they are totally different accounts and have no linkage between them. Each user account will have its own login credential."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"It is possible to link accounts in 2 different realms to the same Active Directory. By doing so, the account with same username will have the same login credential.\nBut from Keycloak perspective, they are treated as different user accounts."})}),"\n",(0,s.jsx)(n.p,{children:"To use this setup to implement multitenancy, the shared application need to be able to handle multiple realms. All the OpenID endpoint URLs will be different as the Realm name is part of the URL. For example, the endpoint URL to retrieve user info is:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-Bash",children:"/realms/<realm-name>/protocol/openid-connect/userinfo\n"})}),"\n",(0,s.jsx)(n.p,{children:"The shared application will need to know the Realm that the user is accessing and use the correct OpenID endpoints."}),"\n",(0,s.jsxs)(n.p,{children:["One possible approach is to use different FQDN for each tenant to access the same application. For example, tenant A will use ",(0,s.jsx)(n.code,{children:"http://tenantB.myapp.com"})," to access the application and tenant B will use ",(0,s.jsx)(n.code,{children:"http://tenantB.myapp.com"})," to access the same application."]}),"\n",(0,s.jsx)(n.p,{children:"The shared application can then use the requesting URL to determine the correct realm that the user is trying to access."}),"\n",(0,s.jsx)(n.p,{children:"Currently, the AGIL Ops Hub Web Framework doesn\u2019t support multiple realm. To work around this limitation, project can deploy distinct Web App, one for each tenant."}),"\n",(0,s.jsx)(n.h2,{id:"single-realm-for-all-tenants",children:"Single Realm for All Tenants"}),"\n",(0,s.jsx)(n.p,{children:"In this setup, all tenants reside within same realm. All tenants will share the same realm configuration but each tenant can have their own roles, group, resource, and permission configuration."}),"\n",(0,s.jsx)(n.p,{children:"This setup is useful for scenarios where tenants are all belong to same organization group but each tenant would want to manage their own application permissions. Each user account in this setup must be unique across all tenants and each user can be assigned to one or more tenant, allowing them to access different resources in different tenants."}),"\n",(0,s.jsx)(n.p,{children:"For example, each company in ST Engineering (i.e., MSS, ANS, T&S, etc.) can be a tenant of the application, where each have its own management of roles, groups, resource, and permission. A HR staff can be assigned to join multiple tenants to help those tenants in their HR matters. The HR staff will only have one user account in the application but will be able to access different tenants and perform different function depending on the permission granted in those tenants."}),"\n",(0,s.jsx)(n.p,{children:"To support this setup, IAMS extended Keycloak to add Tenant concept to the realm, allowing each realm to have its own unique roles, groups, and access control settings."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"If you are don\u2019t intent to support multitenancy within the same Realm, you will still need to create at least a Tenant to make use of IAMS authorization mechanism."})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);