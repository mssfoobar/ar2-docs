"use strict";(self.webpackChunk_mssfoobar_docs=self.webpackChunk_mssfoobar_docs||[]).push([[6506],{50831:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"modules/iams/deployment/configuring-for-production/secure-sensitive-endpoints","title":"Securing Sensitive Endpoints","description":"The deployment manifests files in Quick Start section expose all endpoints to facilitate development but should be disabled for production deployment.","source":"@site/docs/modules/iams/deployment/configuring-for-production/secure-sensitive-endpoints.md","sourceDirName":"modules/iams/deployment/configuring-for-production","slug":"/modules/iams/deployment/configuring-for-production/secure-sensitive-endpoints","permalink":"/docs/docs/modules/iams/deployment/configuring-for-production/secure-sensitive-endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/mssfoobar/docs/tree/main/docs/modules/iams/deployment/configuring-for-production/secure-sensitive-endpoints.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Secure Sensitive Endpoints"},"sidebar":"modulesSidebar","previous":{"title":"Overview","permalink":"/docs/docs/modules/iams/deployment/configuring-for-production/overview"},"next":{"title":"Secure Database Credentials","permalink":"/docs/docs/modules/iams/deployment/configuring-for-production/secure-database-credentials"}}');var t=o(74848),i=o(28453);const r={sidebar_position:2,sidebar_label:"Secure Sensitive Endpoints"},d="Securing Sensitive Endpoints",c={},l=[];function a(e){const n={code:"code",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"securing-sensitive-endpoints",children:"Securing Sensitive Endpoints"})}),"\n",(0,t.jsx)(n.p,{children:"The deployment manifests files in Quick Start section expose all endpoints to facilitate development but should be disabled for production deployment."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["PostgreSQL \u2013 port ",(0,t.jsx)(n.code,{children:"30432"})," is exposed via ",(0,t.jsx)(n.code,{children:"NodePort"})," which should be disabled in production or protected by firewall. Typical production deployment will have PostgreSQL deployed in a separate tier from the application tier, i.e., not in the same Kubernetes Cluster as the IAMS."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["IAMS-AAS \u2013 the REST APIs are intended to be invoked by backend services and not expose outside of Kubernetes. The Ingress Controller should not be created in production. The endpoints are:\n",(0,t.jsx)(n.code,{children:"{{server}}/admin/*"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"IAMS-Keycloak \u2013 Keycloak has numbers of endpoints and not all should be expose outside of Kubernetes. Depending on requirements, the following endpoints may or may not be exposed:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Token Endpoint \u2013 this endpoint allows us to retrieve access token, refresh token, or id token. It is normally invoked by backend services and should not be exposed. However, depending on Mobile Client Authentication flow implementation, this endpoint may need to be exposed. The token endpoint is:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"{{server}}/realms/{{realm}}/protocol/openid-connect/token"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"User Info Endpoint \u2013 this endpoint is used to retrieve user profile data using valid access token. It can also be used to validate access token. This endpoint is used by backend services but may be invoked by Mobile Client. The endpoint is:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"{{server}}/realms/{{realm}}/protocol/openid-connect/userinfo"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Token Introspect Endpoint \u2013 this endpoint is to verify that an access token is active or to retrieve more metadata about the access token. As with above endpoints, may need to be exposed for Mobile Client. The endpoint is:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"{{server}}/realms/{{realm}}/protocol/openid-connect/token/introspect"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Administration Endpoints \u2013 those endpoints are a set of REST APIs to perform administrative tasks. Those endpoints should be protected and shouldn\u2019t be expose but as the Keycloak Web Admin Console Client (from browser) need to directly invoke those REST APIs, those endpoints need to be expose out of Kubernetes Cluster. As a good practice, the Keycloak Web Admin Console should not be expose out to the Internet. The endpoints are:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"{{server}}/admin/* "})}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>d});var s=o(96540);const t={},i=s.createContext(t);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);