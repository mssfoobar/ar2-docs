"use strict";(self.webpackChunk_mssfoobar_docs=self.webpackChunk_mssfoobar_docs||[]).push([[1392],{42769:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"modules/rnr/quickstart/quickstart","title":"Quickstart","description":"Sub-modules","source":"@site/docs/modules/rnr/quickstart/quickstart.mdx","sourceDirName":"modules/rnr/quickstart","slug":"/modules/rnr/quickstart/","permalink":"/docs/docs/modules/rnr/quickstart/","draft":false,"unlisted":false,"editUrl":"https://github.com/mssfoobar/docs/tree/main/docs/modules/rnr/quickstart/quickstart.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Quickstart"},"sidebar":"modulesSidebar","previous":{"title":"Overview","permalink":"/docs/docs/modules/rnr/overview"},"next":{"title":"Development","permalink":"/docs/docs/modules/rnr/development/"}}');var i=s(74848),t=s(28453);const o={sidebar_position:1,sidebar_label:"Quickstart"},l="Quickstart",c={},a=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Required Services",id:"required-services",level:3},{value:"Running Locally",id:"running-locally",level:2},{value:"Running with Docker",id:"running-with-docker",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"quickstart",children:"Quickstart"})}),"\n",(0,i.jsx)(n.p,{children:"Sub-modules"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"REPLAYMGR (http service to manage replay session)"}),"\n",(0,i.jsx)(n.li,{children:"DBOP (db operator to initialize & cleanup replay db)"}),"\n",(0,i.jsx)(n.li,{children:"MSGOP (msg operator to playback replay by reading nats jetstream messages)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,i.jsx)(n.h3,{id:"required-services",children:"Required Services"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"postgres (live db)"}),"\n",(0,i.jsx)(n.li,{children:"postgres (replay db)"}),"\n",(0,i.jsx)(n.li,{children:"nats (jetstream enable)"}),"\n",(0,i.jsx)(n.li,{children:"minio (store db snapshot)"}),"\n",(0,i.jsx)(n.li,{children:"Debezium (nats connector)"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Debezium should be configured to capture change data event on postgres (live db).\nRefer to this ",(0,i.jsx)(n.a,{href:"https://natsbyexample.com/examples/integrations/debezium/cli",children:"document"})," for how to configure debezium with nats."]})}),"\n",(0,i.jsx)(n.h2,{id:"running-locally",children:"Running Locally"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Clone the repository:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/mssfoobar/ar2-rnr.git\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Each module have their own ",(0,i.jsx)(n.code,{children:"{ service_name }.env.sample"})," file.\nCopy and remove the ",(0,i.jsx)(n.code,{children:".sample"})," in repository root directory. Provide the necessary variables inside the ",(0,i.jsx)(n.code,{children:".env"})," file."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start services by go command"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"go run cmd/replay-manager/main.go -c ./.replay-manager.env\ngo run cmd/db-operator/main.go -c ./.db-operator.env\ngo run cmd/msg-operator/main.go -c ./.msg-operator.env\n"})}),"\n",(0,i.jsx)(n.h2,{id:"running-with-docker",children:"Running with Docker"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Install ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/desktop/install/ubuntu/",children:"Docker"})]}),"\n",(0,i.jsxs)(n.li,{children:["Install ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/install/linux/",children:"Docker-Compose"})]}),"\n",(0,i.jsxs)(n.li,{children:["Docker ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/install/linux-postinstall/",children:"Post-installation"})," setup"]}),"\n",(0,i.jsx)(n.li,{children:"Clone"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/mssfoobar/ar2-rnr.git\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Start docker-compose"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Cleanup Docker"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose down\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["By this point, record & replay services will be up and running.\nYou can verify the service liveness by hitting at the liveness & readiness endpoint.\nEven though service is alive you won't be able to start the playback session yet since there is no db snapshot to start the playback session.\nRefer to this infra ",(0,i.jsx)(n.a,{href:"https://github.com/mssfoobar/ar2-infra/tree/main/argocd/dev2/manifests/ar2-rnr",children:"repo"})," on how we set up periodic backup & clean cronjob."]})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(96540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);