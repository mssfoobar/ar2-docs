"use strict";(self.webpackChunk_mssfoobar_docs=self.webpackChunk_mssfoobar_docs||[]).push([[9338],{24543:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"modules/prerequisites/access","title":"Access Configuration","description":"Configuring Docker to have access to pull images","source":"@site/docs/modules/prerequisites/access.mdx","sourceDirName":"modules/prerequisites","slug":"/modules/prerequisites/access","permalink":"/docs/docs/modules/prerequisites/access","draft":false,"unlisted":false,"editUrl":"https://github.com/mssfoobar/docs/tree/main/docs/modules/prerequisites/access.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Access"},"sidebar":"modulesSidebar","previous":{"title":"Overview","permalink":"/docs/docs/modules/prerequisites/overview"},"next":{"title":"Tools","permalink":"/docs/docs/modules/prerequisites/tools"}}');var i=n(74848),a=n(28453),c=n(21432);const r={sidebar_position:2,sidebar_label:"Access"},t="Access Configuration",l={},h=[{value:"Configuring <code>Docker</code> to have access to pull images",id:"configuring-docker-to-have-access-to-pull-images",level:2},{value:"Preparing your Personal Access Token for Kubernetes",id:"preparing-your-personal-access-token-for-kubernetes",level:2},{value:"Configuring <code>npm</code> to have access to pull packages",id:"configuring-npm-to-have-access-to-pull-packages",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"access-configuration",children:"Access Configuration"})}),"\n",(0,i.jsxs)(s.h2,{id:"configuring-docker-to-have-access-to-pull-images",children:["Configuring ",(0,i.jsx)(s.code,{children:"Docker"})," to have access to pull images"]}),"\n",(0,i.jsxs)(s.p,{children:["If you've already taken a look at our image tags, you'll notice they begin with ",(0,i.jsx)(s.code,{children:"ghcr.io/mssfoobar"})," - if the image\nyou're trying to pull is refering to a different website (e.g. ",(0,i.jsx)(s.code,{children:"AWS EKS"}),") rather than ",(0,i.jsx)(s.code,{children:"ghcr.io"}),", your team might have\npulled the images and stored them to a different container registry. In that case, these instructions might not apply\nto you."]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If you have not already been given access to the container images, request for access from one of the team members.\nYou will need to have a GitHub account with access to the images. You can check to see if you have access by\nsigning-in to your GitHub account, then browsing the packages here: ",(0,i.jsx)(s.a,{href:"https://github.com/orgs/mssfoobar/packages",children:"https://github.com/orgs/mssfoobar/packages"})]}),"\n",(0,i.jsx)(s.p,{children:"If you don't see the container image you need, your account does not have access to it."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Generate a personal access token with ",(0,i.jsx)(s.code,{children:"read:packages"})," scope to download container images. If you're doing development\nand also need to push container images, you will also need the ",(0,i.jsx)(s.code,{children:"write:packages"})," scope. You can refer to GitHub's\nofficial instructions on how to generate personal access tokens here: ",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic",children:"Creating a GitHub Personal Access Token"})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Login to Docker with the token:"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(c.A,{language:"bash",children:["$ echo ",(0,i.jsx)("span",{className:"highlight",children:"TOKEN"})," | docker login ghcr.io -u ",(0,i.jsx)("span",{className:"highlight",children:"USERNAME"})," --password-stdin"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)("span",{className:"highlight",children:"TOKEN"})," with your token generated in step 2"]}),"\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)("span",{className:"highlight",children:"USERNAME"})," with your GitHub username"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["For more details on working with GitHub's container registry, you can refer to their\n",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry",children:"official documentation"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"preparing-your-personal-access-token-for-kubernetes",children:"Preparing your Personal Access Token for Kubernetes"}),"\n",(0,i.jsxs)(s.p,{children:["To set your Docker installation up to be able to access AGIL Ops Hub's containers on ",(0,i.jsx)(s.code,{children:"ghcr.io/mssfoobar"}),", you will need\na personal access token that is able to read packages from ",(0,i.jsx)(s.code,{children:"ghcr.io/mssfoobar"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["You can skip this steps if you are using other means to deploy the ",(0,i.jsx)(s.code,{children:"iams-keycloak"})," and ",(0,i.jsx)(s.code,{children:"iams-aas"})," images."]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Refer to the following link to create a personal access token:"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic",children:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic"})}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsx)(s.li,{children:"Once you have generated and saved the access token, execute the following command to base64 encode your access token:"}),"\n"]}),"\n",(0,i.jsxs)(c.A,{language:"bash",children:['echo -n "',(0,i.jsx)("span",{className:"highlight",children:"USERNAME"}),":",(0,i.jsx)("span",{className:"highlight",children:"PAT"}),'" | base64']}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)("span",{className:"highlight",children:"USERNAME"})," with your GitHub username"]}),"\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)("span",{className:"highlight",children:"PAT"})," with the token retrieved from step 1."]}),"\n"]}),"\n",(0,i.jsxs)(s.ol,{start:"3",children:["\n",(0,i.jsxs)(s.li,{children:["Next you will need to compose a new ",(0,i.jsx)(s.code,{children:"dockerconfigjson"})," string and base64 encode it using the following command:"]}),"\n"]}),"\n",(0,i.jsxs)(c.A,{language:"bash",children:['$ echo -n \'{"auths":{"ghcr.io":{"auth":"',(0,i.jsx)("span",{className:"highlight",children:"ENCODED_TOKEN"}),"\"}}}' | base64"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Replace ",(0,i.jsx)("span",{className:"highlight",children:"ENCODED_TOKEN"})," with the output string obtained in step 2."]}),"\n"]}),"\n",(0,i.jsxs)(s.h2,{id:"configuring-npm-to-have-access-to-pull-packages",children:["Configuring ",(0,i.jsx)(s.code,{children:"npm"})," to have access to pull packages"]}),"\n",(0,i.jsxs)(s.p,{children:["By default, our repositories will include an ",(0,i.jsx)(s.code,{children:".npmrc"})," file which points to ",(0,i.jsx)(s.code,{children:"npm.pkg.github.com"})," for npm packages with\nthe ",(0,i.jsx)(s.code,{children:"@mssfoobar"})," scope. If you are setting up a new project (e.g. using the ",(0,i.jsx)(s.a,{href:"/docs/docs/modules/web-base/overview",children:"web-base"}),") or\nyour development workflow invol"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"npm set //npm.pkg.github.com/:_authToken=<YOUR_GITHUB_PERSONAL_ACCESS_TOKEN>\n"})})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);